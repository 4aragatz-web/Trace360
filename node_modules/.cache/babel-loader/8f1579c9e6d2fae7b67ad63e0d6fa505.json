{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function NewProductForm(_ref){let{traceId,onSave,onCancel,initialData}=_ref;const[farmName,setFarmName]=useState((initialData===null||initialData===void 0?void 0:initialData.farmName)||'');const[organicCertified,setOrganicCertified]=useState((initialData===null||initialData===void 0?void 0:initialData.organicCertified)||'');const[dateSow,setDateSow]=useState((initialData===null||initialData===void 0?void 0:initialData.dateSow)||'');const[seedVariety,setSeedVariety]=useState((initialData===null||initialData===void 0?void 0:initialData.seedVariety)||'');const[grownFor,setGrownFor]=useState((initialData===null||initialData===void 0?void 0:initialData.grownFor)||'');const[dateHarvested,setDateHarvested]=useState((initialData===null||initialData===void 0?void 0:initialData.dateHarvested)||'');const[thc,setThc]=useState((initialData===null||initialData===void 0?void 0:initialData.thc)||'');const[currentStatus,setCurrentStatus]=useState((initialData===null||initialData===void 0?void 0:initialData.currentStatus)||'');// Track previous status for custody history\nconst[previousStatus,setPreviousStatus]=useState((initialData===null||initialData===void 0?void 0:initialData.currentStatus)||'');const handleSubmit=e=>{e.preventDefault();// Build custody history entry if status changed\nlet custodyHistory=initialData!==null&&initialData!==void 0&&initialData.custodyHistory?[...initialData.custodyHistory]:[];if(previousStatus!==currentStatus){custodyHistory.push({date:new Date().toISOString().slice(0,10),previousStatus:previousStatus,newStatus:currentStatus});}onSave({id:traceId,farmName,organicCertified,dateSow,seedVariety,grownFor,dateHarvested,thc,currentStatus,custodyHistory});setPreviousStatus(currentStatus);// update previous status for next edit\n};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:initialData?'Edit Product':'New Product Entry'}),/*#__PURE__*/_jsxs(\"form\",{className:\"product-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"span\",{className:\"form-label\",children:\"Trace ID:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form-input\",children:traceId}),/*#__PURE__*/_jsx(\"span\",{className:\"form-label\",children:\"Location Grown:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",value:farmName,onChange:e=>setFarmName(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{className:\"form-label\",children:\"Organic Certified:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-input\",value:organicCertified,onChange:e=>setOrganicCertified(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yes\",children:\"Yes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"No\",children:\"No\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"form-label\",children:\"Planted Date:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"date\",value:dateSow,onChange:e=>setDateSow(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{className:\"form-label\",children:\"Seed Variety:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",value:seedVariety,onChange:e=>setSeedVariety(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{className:\"form-label\",children:\"Grown for:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",value:grownFor,onChange:e=>setGrownFor(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{className:\"form-label\",children:\"Harvested Date:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"date\",value:dateHarvested,onChange:e=>setDateHarvested(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{className:\"form-label\",children:\"THC compliance level:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",value:thc,onChange:e=>setThc(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{className:\"form-label\",children:\"Current Status:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",value:currentStatus,onChange:e=>setCurrentStatus(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{style:{gridColumn:'1 / span 2',marginTop:16},children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:initialData?'Update Product':'Save Product'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,style:{marginLeft:8},children:\"Cancel\"})]})]})]});}export default NewProductForm;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","NewProductForm","_ref","traceId","onSave","onCancel","initialData","farmName","setFarmName","organicCertified","setOrganicCertified","dateSow","setDateSow","seedVariety","setSeedVariety","grownFor","setGrownFor","dateHarvested","setDateHarvested","thc","setThc","currentStatus","setCurrentStatus","previousStatus","setPreviousStatus","handleSubmit","e","preventDefault","custodyHistory","push","date","Date","toISOString","slice","newStatus","id","children","className","onSubmit","value","onChange","target","type","style","gridColumn","marginTop","onClick","marginLeft"],"sources":["C:/Users/4arag/New Project/traceability-app/src/NewProductForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nfunction NewProductForm({ traceId, onSave, onCancel, initialData }) {\r\n  const [farmName, setFarmName] = useState(initialData?.farmName || '');\r\n  const [organicCertified, setOrganicCertified] = useState(initialData?.organicCertified || '');\r\n  const [dateSow, setDateSow] = useState(initialData?.dateSow || '');\r\n  const [seedVariety, setSeedVariety] = useState(initialData?.seedVariety || '');\r\n  const [grownFor, setGrownFor] = useState(initialData?.grownFor || '');\r\n  const [dateHarvested, setDateHarvested] = useState(initialData?.dateHarvested || '');\r\n  const [thc, setThc] = useState(initialData?.thc || '');\r\n  const [currentStatus, setCurrentStatus] = useState(initialData?.currentStatus || '');\r\n\r\n  // Track previous status for custody history\r\n  const [previousStatus, setPreviousStatus] = useState(initialData?.currentStatus || '');\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    // Build custody history entry if status changed\r\n    let custodyHistory = initialData?.custodyHistory ? [...initialData.custodyHistory] : [];\r\n    if (previousStatus !== currentStatus) {\r\n      custodyHistory.push({\r\n        date: new Date().toISOString().slice(0, 10),\r\n        previousStatus: previousStatus,\r\n        newStatus: currentStatus\r\n      });\r\n    }\r\n\r\n    onSave({\r\n      id: traceId,\r\n      farmName,\r\n      organicCertified,\r\n      dateSow,\r\n      seedVariety,\r\n      grownFor,\r\n      dateHarvested,\r\n      thc,\r\n      currentStatus,\r\n      custodyHistory\r\n    });\r\n\r\n    setPreviousStatus(currentStatus); // update previous status for next edit\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>{initialData ? 'Edit Product' : 'New Product Entry'}</h2>\r\n      <form className=\"product-form\" onSubmit={handleSubmit}>\r\n        <span className=\"form-label\">Trace ID:</span>\r\n        <span className=\"form-input\">{traceId}</span>\r\n\r\n        <span className=\"form-label\">Location Grown:</span>\r\n        <input className=\"form-input\" value={farmName} onChange={e => setFarmName(e.target.value)} />\r\n\r\n        <span className=\"form-label\">Organic Certified:</span>\r\n        <select className=\"form-input\" value={organicCertified} onChange={e => setOrganicCertified(e.target.value)}>\r\n          <option value=\"\">Select</option>\r\n          <option value=\"Yes\">Yes</option>\r\n          <option value=\"No\">No</option>\r\n        </select>\r\n\r\n        <span className=\"form-label\">Planted Date:</span>\r\n        <input className=\"form-input\" type=\"date\" value={dateSow} onChange={e => setDateSow(e.target.value)} />\r\n\r\n        <span className=\"form-label\">Seed Variety:</span>\r\n        <input className=\"form-input\" value={seedVariety} onChange={e => setSeedVariety(e.target.value)} />\r\n\r\n        <span className=\"form-label\">Grown for:</span>\r\n        <input className=\"form-input\" value={grownFor} onChange={e => setGrownFor(e.target.value)} />\r\n\r\n        <span className=\"form-label\">Harvested Date:</span>\r\n        <input className=\"form-input\" type=\"date\" value={dateHarvested} onChange={e => setDateHarvested(e.target.value)} />\r\n\r\n        <span className=\"form-label\">THC compliance level:</span>\r\n        <input className=\"form-input\" value={thc} onChange={e => setThc(e.target.value)} />\r\n\r\n        <span className=\"form-label\">Current Status:</span>\r\n        <input className=\"form-input\" value={currentStatus} onChange={e => setCurrentStatus(e.target.value)} />\r\n\r\n        <div style={{ gridColumn: '1 / span 2', marginTop: 16 }}>\r\n          <button type=\"submit\">{initialData ? 'Update Product' : 'Save Product'}</button>\r\n          <button type=\"button\" onClick={onCancel} style={{ marginLeft: 8 }}>Cancel</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\nexport default NewProductForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}